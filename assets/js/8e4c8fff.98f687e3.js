"use strict";(self.webpackChunkpop_gen_jl=self.webpackChunkpop_gen_jl||[]).push([[2389],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return u}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),d=p(n),u=i,h=d["".concat(l,".").concat(u)]||d[u]||c[u]||o;return n?a.createElement(h,r(r({ref:t},m),{},{components:n})):a.createElement(h,r({ref:t},m))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var p=2;p<o;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5245:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},assets:function(){return m},toc:function(){return c},default:function(){return u}});var a=n(7462),i=n(3366),o=(n(7294),n(3905)),r=["components"],s={id:"tips",title:"PopGen.jl tips",sidebar_label:"PopGen.jl tips"},l=void 0,p={unversionedId:"gettingstarted/tips",id:"gettingstarted/tips",title:"PopGen.jl tips",description:"Here are some useful tips to getting comfortable with PopGen.jl.",source:"@site/docs/gettingstarted/tips.md",sourceDirName:"gettingstarted",slug:"/gettingstarted/tips",permalink:"/PopGen.jl/docs/gettingstarted/tips",editUrl:"https://github.com/BioJulia/PopGen.jl/edit/documentation/docs/gettingstarted/tips.md",tags:[],version:"current",lastUpdatedAt:1652455114,formattedLastUpdatedAt:"5/13/2022",frontMatter:{id:"tips",title:"PopGen.jl tips",sidebar_label:"PopGen.jl tips"},sidebar:"docs",previous:{title:"A quick Julia primer",permalink:"/PopGen.jl/docs/gettingstarted/juliaprimer"},next:{title:"Comparison",permalink:"/PopGen.jl/docs/gettingstarted/comparison"}},m={},c=[{value:"PopGen vs PopGenCore",id:"popgen-vs-popgencore",level:3},{value:"Internal functions",id:"internal-functions",level:3},{value:"Function names",id:"function-names",level:3},{value:"Argument names",id:"argument-names",level:3},{value:"Dev tips",id:"dev-tips",level:3}],d={toc:c};function u(e){var t=e.components,n=(0,i.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Here are some useful tips to getting comfortable with PopGen.jl."),(0,o.kt)("h3",{id:"popgen-vs-popgencore"},"PopGen vs PopGenCore"),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"TLDR")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"PopGen is for analyses, PopGenCore is for everything else"))),(0,o.kt)("p",null,"PopGen.jl is now intended exclusively for population genetic analyses, and PopGenCore.jl is the \"core\" package\nwhere just about every utility lives relating to working with PopData that isn't an analysis. The recent split\nof PopGen and PopGenCore means PopGenCore is now a great standalone package for data viewing\nand manipulation. If you don't need higher order analyses (which is what PopGen.jl provides), then PopGenCore.jl\nshould be enough. "),(0,o.kt)("h3",{id:"internal-functions"},"Internal functions"),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"TLDR")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"functions you aren't expected to use start with underscores ",(0,o.kt)("inlineCode",{parentName:"p"},"_")))),(0,o.kt)("p",null,"It's pretty common to have a series of user-facing functions in a package (the ones that get exported)\nalong with a series of unexported ones that are useful for development or are helper functions for the\nexported ones. If you see a function that starts with an underscore, like ",(0,o.kt)("inlineCode",{parentName:"p"},"_adjacency_matrix"),", then you\n(as a user) aren't expected to know or worry about it, let alone use it. I mean, you totally can, but\nnot all of them have docstrings."),(0,o.kt)("h3",{id:"function-names"},"Function names"),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"TLDR")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"all user functions in PopGen.jl (not including PopGenCore.jl) are lowercase and use no underscores"))),(0,o.kt)("p",null,"In an effort to be consistent with the Julia language and just consistent overall, user-facing functions\nare named with three main principals:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"as verbose of a name as is reasonable"),(0,o.kt)("li",{parentName:"ol"},"no underscores between words"),(0,o.kt)("li",{parentName:"ol"},"all lowercase, always, unless it's a DataType",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"or method keyword option (like the ",(0,o.kt)("inlineCode",{parentName:"li"},"kinship")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"kmeans")," series)")))),(0,o.kt)("p",null,"These decisions are because of years-long frustration with the swirling chaos that is R function names.\nWhere it is possible and reasonable to do so, function names are verbose and descriptive. For example,\nif you wanted to perform a pairwise FST, the function is called ",(0,o.kt)("inlineCode",{parentName:"p"},"pairwisefst")," -- ",(0,o.kt)("strong",{parentName:"p"},"not")," ",(0,o.kt)("inlineCode",{parentName:"p"},"fst"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"FST"),",\n",(0,o.kt)("inlineCode",{parentName:"p"},"pairwise_fst"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"pairwise_FST"),", or ",(0,o.kt)("inlineCode",{parentName:"p"},"pairwiseFST"),". This is an ongoing effort, so if you spot something\nthat doesn't fit this mold, please submit a Pull Request!"),(0,o.kt)("h3",{id:"argument-names"},"Argument names"),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"TLDR")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"all user functions in PopGen.jl have descriptive keyword argument names"))),(0,o.kt)("p",null,"This too is driven by frustration with the shortened and/or truncated keyword arguments of just about\nevery R function. As if learning another language wasn't enough of a task, memorizing nonintuitive\nkeywords is a completely unneccessary stumbling block. To the best of our abilities, we try to name\nkeywords using ",(0,o.kt)("em",{parentName:"p"},"entire")," words, and hopefully words that are intuitive if you were just trying to guess\nbefore calling up the docstring. "),(0,o.kt)("h3",{id:"dev-tips"},"Dev tips"),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"TLDR")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("ul",{parentName:"div"},(0,o.kt)("li",{parentName:"ul"},"Avoid allocations when possible"),(0,o.kt)("li",{parentName:"ul"},"First drafts don't need to be efficient or performant"),(0,o.kt)("li",{parentName:"ul"},"When in doubt, roll your own helper functions")))),(0,o.kt)("p",null,"If you plan on extending PopGen.jl, here are some useful tips we learned the hard way:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Most basic (non-mathematic) or fundamental operations live in PopGenCore.jl"),(0,o.kt)("li",{parentName:"ul"},"Math fundementals and allele/genotype matrix operations live in PopGen.jl"),(0,o.kt)("li",{parentName:"ul"},"It's ok to write something functional but not efficient. Things we can always be improved later!"),(0,o.kt)("li",{parentName:"ul"},"Allocations are the enemy",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Ignore this recommendation if the goal is a first draft or proof of concept"),(0,o.kt)("li",{parentName:"ul"},"Creating Arrays is costly and that cost scales ",(0,o.kt)("strong",{parentName:"li"},"tremendously")," with core operations"),(0,o.kt)("li",{parentName:"ul"},"If the goal is to be performant, aim for as few allocations as possible"),(0,o.kt)("li",{parentName:"ul"},"Embrace loops"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"if")," statements inside loops slow them down",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"But if they are small or simple enough, can still be faster and more efficient than allocating Arrays"))),(0,o.kt)("li",{parentName:"ul"},"Sometimes ",(0,o.kt)("inlineCode",{parentName:"li"},"Base")," (or others) don't have the performance you need",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"There's no harm in writing a small helper function if it's an improvement"))),(0,o.kt)("li",{parentName:"ul"},"Incrementing a variable inside a loop with ",(0,o.kt)("inlineCode",{parentName:"li"},"+=")," or similar (example 1) is ",(0,o.kt)("strong",{parentName:"li"},"a lot")," more performant that doing so with a list comprehension (example 2), even though it requires more lines of code.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-julia"},"# example 1: Incrementing inside for loop\n# performant\nn = 0\nfor i in 1:something\n    n += 1\nend\n\n# example 2: Incrementing inside list comprehension \n# not performant\nn = 0\n[n+= 1 for i:something]\n")))}u.isMDXComponent=!0}}]);